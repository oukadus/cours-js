<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fonctions</title>
</head>

<body>

    <script>

        const HR = '<hr>';
        const BR = '<br>';

        document.write('<h2>Fonctions prédéfinies & utilisateur</h2>');

        // JS posséde des fonctions. Ce sont des morceaux de codes encapsulés qu'on appel au besoin afin d'exécuter une action précise.  On distingue les fonctions prédéfinis et les fonctions utilisateurs. 

        document.write('<h3>Fonctions prédéfinies</h3>');

        // ----- 1)- Fonctions prédéfinis sur des nombres ------ 
        let testNumber = 1.5555555;
        document.write(typeof testNumber);
        let number = testNumber.toFixed(2);
        document.write(BR, typeof number + ' ' + number);

        // toFixed() défini un nombre de chiffres après la virgule et retourne une chaine de caractère (String)


        document.write(BR, typeof parseFloat(number), HR, BR);

        // let testMath = Math.pow(2, 2); // puissance
        // let testMath = Math.PI // PI
        // let testMath = Math.floor(1.9); // Nombre entier inférieur
        // let testMath = Math.ceil(1.9); //Nombre entier supérieur
        // let testMath = Math.max(10, 8, 14, 50, 6); // retourn la valeur la  plus grande
        // let testMath = Math.min(10, 8, 14, 50, 6); // retourne la valeur la plus petite
        // let testMath = Math.random(); // retourne la valeur décimal entre 0 et 1, qui change à chaque raffraichissement de la page. 


        // Je veux un nombre entier entre 0 et 100 de façon aléatoire

        let nombre = Math.random() * 100;
        document.write(Math.round(nombre), BR, HR); // Arrondi au supérieur ou inférieur selon les nombres après la virgule.

        // ----- 2)- Fonctions prédéfinis sur des String ------ 
        let phrase = 'Salut Kader'
        document.write(phrase.length, BR); // retourne le nombre de caractère d'une string ou d'un array
        document.write(phrase.indexOf('K'), BR); // retourne l'index de l'argument placé en paramètre de la fonction. 
        document.write(phrase.toUpperCase(), BR) // retourne la phrase au majuscule
        document.write(phrase.toLowerCase(), BR) // retourne la phrase au majuscule

        let phrase2 = '      Salut           Kader            ';
        let sansEspace = phrase2.trim();
        console.log(phrase2);
        console.log(sansEspace);

        // la fonction "trim()" permet de retirer les espaces avant et après. 

        let phrase3 = 'métro | boulot | dodo';
        console.log(phrase3.split('|', 2));

        document.write('<h3>Fonctions utilisateurs</h3>');
        // un des grands principes en programmation est d'avoir un code DRY (Don't Repeat Yourself) 

        // ------ Déclaration d'une fonction ou initialisation d'une fofonction 

        function maFonction() {
            document.write(`<p>Ma première fonction</p>`)
        }

        // Appel (exécution) de la fonction 
        maFonction();

        // Autre syntaxe
        // Cela consiste à assigner une fonction à une variable

        let direBonjour = function (prenom, nom) {
            document.write(`<p>Bonjour ${prenom} ${nom}</p>`)
        }

        direBonjour('Kader', 'Ounadjela');

        // Fonction fléchée

        const myFunction = (prenom, nom) => {
            document.write(`<p>Bonjour ${prenom} ${nom}</p>`)
        }

        myFunction('Alex', 'Graz');

        // Fonction de calcule 

        function addition(nombre1, nombre2) {
            let resultat = nombre1 + nombre2;
            document.write(`Résultat de l'addition du ${nombre1} + ${nombre2} est égale à ${resultat}`);
        }

        addition(5, 10);

        // Protection des fonctions 
        function direSalut(prenomSalut = '') {
            document.write(`<p>Salut ${prenomSalut} </p> `);
        }

        direSalut();

        // Création d'une fonction comme raccourci de document.write()

        const D = (content, balise) => {
            if (balise === 1) {
                document.write(`<h2>${content}</h2>`)
            } else {
                document.write(`<p>${content}</p>`)
            }

        }

        D('titre', 1);

        // Fonctions avec le mot clé "Return" (Retourne une valeur) 

        function calculeAge(anneeActuelle, anneeNaissance) {
            return anneeActuelle - anneeNaissance;
        }

        let monAge = calculeAge(2024, 1984);

        D(monAge, 1);

        // Il existe une autre façon pour déclarer une fonction. 
        // fonction fléchée : les accolades ne sont pas nécessaire s'il n'y a qu'une instruction
        // flèche => sert implicitement de RETURN;

        let maFonction2 = (x, y) => {
            D(x + y);
        }

        maFonction2(5, 2);


        let maFonction3 = (f, r) => f * r;
        let produit = maFonction3(6, 5);

        D(produit);

        document.write(HR);

        D('La portée des variables', 1);

        /* 
        En JavaScript, la portée des variablers définit à quel endroits dans le code est accessible. Il existe principalement trois types de portée : 

        Portée globale (global scope)
        Portée locale (local scope)
        Portée bloc (block scope)

        1. Portée globale (global scope) 
        Une variable déclarée en dehors de toute fonction ou bloc a une portée globale. Cela signifie qi'emme est accessible depuis n'importe quelle partie du code. 

        Exemple : 

        */

        let message = 'Hello, world!'; // variable globale 

        let afficherMessage = () => D(message);
        afficherMessage(); // Accés à la variable globale

        // Dans cet exemple, la variable message est designée en dehors de la fonction. Elle est donc accessible partout dans le programme. C'est donc une variable globale. 

        /* 
        2. Portée locale ou fonctionnelle (local scope)
        Une variable déclarée à l'intérieur d'une fonction est accessible niquement à l'intérieur de la fonction. Elle une portée locale

        Exemple : 

        */

        function saluer() {
            let nom = 'Delma'; // Variable locale à la fonction
            D('Salut ' + nom);
        }

        saluer();

        // console.log(nom); // Erreur : not defined car c'est une variable locale (dans la fonction)




















    </script>

</body>

</html>